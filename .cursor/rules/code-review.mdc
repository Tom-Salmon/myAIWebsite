---
alwaysApply: false
---

# Code Review Rules - Red Queen Pattern

## Overview
This rule implements the **Red Queen Pattern** for continuous code quality improvement. The pattern ensures that code quality standards evolve alongside the codebase, maintaining high standards while adapting to project needs.

## Code Review Process

### 1. Pre-Review: Diff Analysis
Before reviewing any code changes, you MUST:
- Perform a diff comparison against the `main` branch (or default branch)
- Identify all files that have been modified, added, or deleted
- Review the context of changes within the broader codebase

### 2. Review Checklist
For each code change, systematically check:

#### TypeScript & Type Safety
- [ ] Run `npm run type-check` to verify no TypeScript errors
- [ ] Ensure all types are properly defined and used
- [ ] Check for `any` types and suggest proper typing
- [ ] Verify strict mode compliance

#### Code Formatting (Prettier)
- [ ] Verify code follows `.prettierrc` configuration:
  - Single quotes: `false`
  - Semicolons: `true`
  - Trailing commas: `all`
  - Print width: `100`
  - Tailwind CSS plugin integration
- [ ] Run Prettier formatting check
- [ ] Ensure consistent formatting across all files

#### Next.js Best Practices
- [ ] Follow Next.js 15 conventions
- [ ] Proper use of App Router patterns
- [ ] Correct component structure and exports
- [ ] Appropriate use of Server/Client Components

#### Code Quality
- [ ] No console.log statements in production code
- [ ] Proper error handling
- [ ] Meaningful variable and function names
- [ ] No commented-out code (unless with explanation)
- [ ] Proper imports organization

#### Performance
- [ ] Efficient React patterns (avoid unnecessary re-renders)
- [ ] Proper use of Next.js optimizations
- [ ] Image optimization where applicable

### 3. Structured Feedback Format

When providing code review feedback, structure it as follows:

```markdown
## Code Review Feedback

### ‚úÖ Strengths
- [List positive aspects]

### ‚ö†Ô∏è Issues Found
1. **Category**: [TypeScript/Formatting/Performance/etc.]
   - **File**: `path/to/file.tsx`
   - **Issue**: [Description]
   - **Fix**: [Suggested fix or code example]

### üîß Required Actions
- [ ] Action item 1
- [ ] Action item 2

### üìù Rule Updates (if needed)
- [Note if any project rules need updating based on new patterns]
```

### 4. Auto-Fix vs. Manual Review

**Auto-Fix (Apply immediately):**
- Prettier formatting issues
- Simple TypeScript type corrections
- Import organization
- Minor syntax fixes

**Manual Review Required (Flag for user):**
- Architectural decisions
- Breaking changes
- Performance optimizations
- Security concerns
- Rule updates needed

### 5. Rule Evolution (Red Queen Pattern)

When encountering patterns that:
- Are repeated across multiple files
- Represent a new best practice
- Conflict with existing rules
- Need clarification

You MUST:
1. Document the pattern in this file
2. Update relevant project rules
3. Apply the new rule retroactively where applicable
4. Inform the user of the rule update

## Continuous Improvement

After each review cycle:
1. **Analyze patterns**: Identify recurring issues
2. **Update rules**: Add new rules or refine existing ones
3. **Document decisions**: Record architectural choices
4. **Maintain consistency**: Ensure all code follows updated standards

## Integration with Project Tools

- **Prettier**: Automatic formatting on save (configure in IDE)
- **TypeScript**: Type checking via `npm run type-check`
- **ESLint**: Code linting via `npm run lint`
- **Git Hooks**: Consider adding pre-commit hooks for automated checks

## Example Review Workflow

1. User makes code changes
2. AI performs diff: `git diff main...current-branch`
3. AI runs automated checks:
   - `npm run type-check`
   - `npm run lint`
   - Prettier check
4. AI reviews each changed file against checklist
5. AI provides structured feedback
6. AI auto-fixes applicable issues
7. AI flags issues requiring user attention
8. AI updates rules if new patterns emerge

---

**Remember**: The goal is not just to find issues, but to continuously improve both the code and the rules that govern it. Like the Red Queen, we must run faster to stay in place - our standards must evolve with our codebase.
